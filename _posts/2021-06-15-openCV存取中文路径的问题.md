---
layout:     post
title:      openCV存取中文路径的问题
subtitle:   学习
date:       2021-06-15
author:     simplex
header-img: img/page_back.jpg
catalog: true
mathjax:  true
tags:
    - 学习	
    - debug
---

心血来潮，写了一个简单的图片类型转化的小工具，遇到了一个问题

# opencv(python) imread,imwiter函数无法读取中文路径

查到的解法

## 1

```python
def cv_imread(file_path=""):
   file_path_gbk=img_path.encode('gbk')
   img_mat=cv2.imread(file_path_gbk.decode())
   return img_mat
```



无用，不适用于python3.6 opencv，opencv不支持no-ascii字符



## 2

丑陋的补救

```python
def cv_imread(filename):
    img = cv2.imdecode(np.fromfile(filename, dtype=np.uint8), cv2.IMREAD_UNCHANGED)
    return img

def cv_imwrite(filename, img, imgType):
    cv2.imencode(imgType, img)[1].tofile(filename)

```

用np来读取

## 3 乌龟策略

遇到中文不处理

```python
def check_contain_chinese(check_str):
    for ch in check_str:
        if u'\u4e00' <= ch <= u'\u9fff':
            return True
    return False
```



## 4 终极策略

**不适用中文路径**

PS：下次买电脑，我刚开始必上来就把系统编码设置成UTF8，GBK太蠢了





# ref

[1] https://blog.csdn.net/weixin_41422954/article/details/79080234

[2] https://blog.csdn.net/qq_39852676/article/details/96430831?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.control

[3] https://www.zhihu.com/question/67157462

[4] https://stackoverflow.com/questions/43185605/how-do-i-read-an-image-from-a-path-with-unicode-characters/43185606

[5] https://github.com/opencv/opencv/wiki/FAQ#video-io-image-io-data-serialization

